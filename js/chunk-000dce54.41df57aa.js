(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-000dce54"],{"3ca3":function(t,e,a){"use strict";var r=a("6547").charAt,s=a("69f3"),i=a("7dd0"),o="String Iterator",n=s.set,c=s.getterFor(o);i(String,"String",(function(t){n(this,{type:o,string:String(t),index:0})}),(function(){var t,e=c(this),a=e.string,s=e.index;return s>=a.length?{value:void 0,done:!0}:(t=r(a,s),e.index+=t.length,{value:t,done:!1})}))},4333:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"products"},[a("div",{staticClass:"text-right mb-4"},[a("button",{staticClass:"button bg-biwacha",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.openModal(!0)}}},[t._v(" 新增商品 ")])]),a("table",{staticClass:"table mb-5"},[a("thead",[a("tr",[a("th",{attrs:{width:"200"}},[a("form",[a("label",{staticClass:"mr-2 mb-0",attrs:{for:"sort"}},[t._v("分類")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.category,expression:"category"}],staticClass:"custom-select align-baseline",attrs:{id:"sort"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.category=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"",selected:""}},[t._v("All")]),t._l(t.categorys,(function(e){return a("option",{key:e,domProps:{value:e}},[t._v(t._s(e))])}))],2)])]),a("th",[t._v("產品名稱")]),a("th",{attrs:{width:"150"}},[t._v("原價")]),a("th",{staticStyle:{cursor:"pointer"},attrs:{width:"150"},on:{click:function(e){e.preventDefault(),t.reverse=!t.reverse,t.sortData="price"}}},[t._v(" 售價 "),""==t.sortData||"price"!==t.sortData?a("i",{staticClass:"fas fa-sort"}):t._e(),"price"==t.sortData?a("i",{staticClass:"fas fa-sort-up ml-1",class:{reverse:t.reverse}}):t._e()]),a("th",{staticStyle:{cursor:"pointer"},attrs:{width:"150"},on:{click:function(e){e.preventDefault(),t.reverse=!t.reverse,t.sortData="release"}}},[t._v(" 是否上架 "),""==t.sortData||"release"!==t.sortData?a("i",{staticClass:"fas fa-sort"}):t._e(),"release"==t.sortData?a("i",{staticClass:"fas fa-sort-up",class:{reverse:t.reverse}}):t._e()]),a("th",{attrs:{width:"150"}},[t._v("編輯")])])]),a("tbody",t._l(t.sortProducts,(function(e){return a("tr",{key:e.id},[a("td",[t._v(t._s(e.category))]),a("td",[t._v(t._s(e.title))]),"0"!==e.origin_price?a("td",{staticClass:"text-center"},[t._v(" "+t._s(t._f("currency")(e.origin_price))+" ")]):t._e(),"0"===e.origin_price?a("td",{staticClass:"text-center"},[t._v("----")]):t._e(),a("td",{staticClass:"text-center"},[t._v(t._s(t._f("currency")(e.price)))]),a("td",[e.is_enabled?a("span",{staticClass:"text-success",staticStyle:{cursor:"pointer"}},[t._v(" 已上架 "),t.newData===e.id?a("i",{staticClass:"fas fa-spinner fa-spin"}):t._e()]):t._e()]),a("td",[a("button",{staticClass:"button",staticStyle:{"background-color":"#1f468c"},on:{click:function(a){return a.preventDefault(),t.openModal(!1,e)}}},[t._v(" 編輯 ")]),a("button",{staticClass:"button",staticStyle:{"background-color":"#724938"},on:{click:function(a){return a.preventDefault(),t.deleteModal(e)}}},[t._v(" 刪除 ")])])])})),0)]),a("div",{staticClass:"modal animated fadeIn",attrs:{id:"productModal",tabindex:"-1",role:"dialog"}},[a("div",{staticClass:"modal-dialog modal-lg",attrs:{role:"document"}},[a("div",{staticClass:"modal-content border-0 bg-dark"},[a("div",{staticClass:"modal-header bg-dark"},[t.isNew?a("h5",{staticClass:"modal-title"},[t._v("新增商品")]):a("h5",{staticClass:"modal-title"},[t._v("編輯商品")]),t._m(0)]),a("div",{staticClass:"modal-body"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-4"},[a("div",{staticClass:"form form-group"},[a("label",{staticClass:"label",attrs:{for:"image"}},[t._v(" 商品圖片 "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.imageUrl,expression:"tempProduct.imageUrl"}],staticClass:"input",attrs:{type:"text",id:"image",placeholder:"請上傳圖片或輸入網址"},domProps:{value:t.tempProduct.imageUrl},on:{input:function(e){e.target.composing||t.$set(t.tempProduct,"imageUrl",e.target.value)}}})]),a("label",{staticClass:"uploadImage"},[a("input",{ref:"files",staticStyle:{display:"none"},attrs:{type:"file"},on:{change:t.uploadFile}}),t.status.fileUploading?a("i",{staticClass:"fas fa-spinner fa-spin mr-1"}):a("i",{staticClass:"far fa-image mr-1"}),t._v("上傳 ")])]),a("img",{staticClass:"img-fluid",attrs:{src:t.tempProduct.imageUrl,alt:""}})]),a("div",{staticClass:"col-sm-8"},[a("div",{staticClass:"form form-row"},[a("div",{staticClass:"form-group col-md-6"},[a("label",{staticClass:"label",attrs:{for:"title"}},[t._v(" 商品名稱 "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.title,expression:"tempProduct.title"}],staticClass:"input",attrs:{type:"text",id:"title",placeholder:"請輸入名稱"},domProps:{value:t.tempProduct.title},on:{input:function(e){e.target.composing||t.$set(t.tempProduct,"title",e.target.value)}}})])]),a("div",{staticClass:"form-group col-md-6"},[a("label",{staticClass:"label",attrs:{for:"category"}},[t._v(" 商品分類 "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.category,expression:"tempProduct.category"}],staticClass:"input",attrs:{type:"text",id:"category",placeholder:"請輸入分類"},domProps:{value:t.tempProduct.category},on:{input:function(e){e.target.composing||t.$set(t.tempProduct,"category",e.target.value)}}})])]),a("div",{staticClass:"form-group col-md-6"},[a("label",{staticClass:"label",attrs:{for:"Item"}},[t._v(" 商品項目 "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.Item,expression:"tempProduct.Item"}],staticClass:"input",attrs:{type:"text",id:"Item",placeholder:"請輸入項目"},domProps:{value:t.tempProduct.Item},on:{input:function(e){e.target.composing||t.$set(t.tempProduct,"Item",e.target.value)}}})])]),a("div",{staticClass:"form-group col-md-6"},[a("label",{staticClass:"label",attrs:{for:"unit"}},[t._v(" 商品單位 "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.unit,expression:"tempProduct.unit"}],staticClass:"input",attrs:{type:"text",id:"unit",placeholder:"請輸入單位(件..個..雙..等)"},domProps:{value:t.tempProduct.unit},on:{input:function(e){e.target.composing||t.$set(t.tempProduct,"unit",e.target.value)}}})])]),a("div",{staticClass:"form-group col-md-6"},[a("label",{staticClass:"label",attrs:{for:"origin_price"}},[t._v(" 原始售價 "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.origin_price,expression:"tempProduct.origin_price"}],staticClass:"input",attrs:{type:"text",id:"origin_price",placeholder:"請輸入原價"},domProps:{value:t.tempProduct.origin_price},on:{input:function(e){e.target.composing||t.$set(t.tempProduct,"origin_price",e.target.value)}}})])]),a("div",{staticClass:"form-group col-md-6"},[a("label",{staticClass:"label",attrs:{for:"price"}},[t._v(" 特別售價 "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.price,expression:"tempProduct.price"}],staticClass:"input",attrs:{type:"text",id:"price",placeholder:"請輸入特價"},domProps:{value:t.tempProduct.price},on:{input:function(e){e.target.composing||t.$set(t.tempProduct,"price",e.target.value)}}})])]),a("div",{staticClass:"form-group col-md-12"},[a("label",{staticClass:"label",attrs:{for:"description"}},[t._v(" 商品描述 "),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.description,expression:"tempProduct.description"}],staticClass:"textarea",attrs:{type:"text",id:"description",placeholder:"請輸入商品描述"},domProps:{value:t.tempProduct.description},on:{input:function(e){e.target.composing||t.$set(t.tempProduct,"description",e.target.value)}}})])]),a("div",{staticClass:"form-group col-md-12"},[a("label",{staticClass:"label",attrs:{for:"content"}},[t._v(" 其他內容 "),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.content,expression:"tempProduct.content"}],staticClass:"textarea",attrs:{type:"text",id:"content",placeholder:"請輸入商品其他內容"},domProps:{value:t.tempProduct.content},on:{input:function(e){e.target.composing||t.$set(t.tempProduct,"content",e.target.value)}}})])])])])])]),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"button bg-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v(" 取消 ")]),a("button",{staticClass:"button bg-biwacha",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.updataProduct(e)}}},[t._v(" 確認 ")])])])])]),a("div",{staticClass:"modal animated bounceInDown",attrs:{id:"delProductModal",tabindex:"-1",role:"dialog","aria-labelledby":"removeCartLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog modal-dialog-centered",attrs:{role:"document"}},[a("div",{staticClass:"modal-content bg-dark  border border-secondary"},[a("div",{staticClass:"modal-body text-center p-4 h4"},[t._v(" 你確定要移除這項商品嗎 "),a("br"),a("strong",{staticClass:"text-danger"},[t._v(t._s(t.tempProduct.title))]),a("br"),t._v(" (刪除後將無法恢復) ")]),a("div",{staticClass:"row text-center border-top border-secondary m-0"},[t._m(1),a("div",{staticClass:"col-6 p-0 btn btn-outline-danger border-0"},[a("div",{staticClass:"p-2",on:{click:function(e){return e.preventDefault(),t.deleteProduct(e)}}},[t._v(" 確定 ")])])])])])])])])},s=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"button-close position-absolute",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("i",{staticClass:"fas fa-times"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-6 p-0 btn btn-outline-danger border-0",attrs:{"data-dismiss":"modal"}},[a("div",{staticClass:"p-2 border-right border-secondary"},[t._v(" 取消 ")])])}],i=(a("99af"),a("4de4"),a("4160"),a("a630"),a("d81d"),a("a9e3"),a("b64b"),a("d3b7"),a("6062"),a("3ca3"),a("159b"),a("ddb0"),a("1157")),o=a.n(i),n={data:function(){return{products:[],tempProduct:{},reverse:!1,sortData:"",categorys:[],category:"",newData:"",isNew:!1,status:{fileUploading:!1}}},methods:{getProducts:function(){var t=this;t.$store.dispatch("loading",!0);var e="".concat("https://vue-course-api.hexschool.io","/api/").concat("gentskin","/admin/products/all");this.$http.get(e).then((function(e){if(e.data.success){var a=[];Object.keys(e.data.products).map((function(t){return[e.data.products[t]]})).forEach((function(t){return a.push(t[0])})),t.products=a;var r=[];t.products.forEach((function(t){r.push(t.category)})),t.categorys=Array.from(new Set(r)),t.newData="",t.$store.dispatch("loading",!1)}else t.$router.push("/login")}))},openModal:function(t,e){var a=this;t?(a.tempProduct={},a.isNew=!0):(a.tempProduct=Object.assign({},e),a.isNew=!1),o()("#productModal").modal({backdrop:"static"}),o()("#productModal").modal("show")},updataProduct:function(){var t=this;this.$store.dispatch("loading",!0),setTimeout((function(){o()("#productModal").modal("hide"),t.$store.dispatch("loading",!1),t.$store.dispatch("activeAlert","測試網站，無法執行新增或編輯")}),1e3)},deleteModal:function(t){var e=this;o()("#delProductModal").modal("show"),e.tempProduct=Object.assign({},t)},deleteProduct:function(){var t=this;this.$store.dispatch("loading",!0),setTimeout((function(){o()("#delProductModal").modal("hide"),t.$store.dispatch("loading",!1),t.$store.dispatch("activeAlert","測試網站，無法執行刪除")}),1e3)},uploadFile:function(){var t=this,e=this.$refs.files.files[0],a=new FormData;a.append("file-to-upload",e);var r="".concat("https://vue-course-api.hexschool.io","/api/").concat("gentskin","/admin/upload");t.status.fileUploading=!0,this.$http.post(r,a,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){t.status.fileUploading=!1,e.data.success?t.$set(t.tempProduct,"imageUrl",e.data.imageUrl):t.$store.dispatch("activeAlert",e.data.message)}))}},computed:{sortProducts:function(){var t=this,e=[];return e=""!==t.category?t.products.filter((function(e){return e.category===t.category})):t.products,"release"===t.sortData?e.sort((function(e,a){var r=e.is_enabled,s=a.is_enabled;return(r>s?1:-1)*(!0===t.reverse?1:-1)})):"price"===t.sortData&&e.sort((function(e,a){var r=Number(e.price),s=Number(a.price);return(r>s?1:-1)*(!0===t.reverse?1:-1)})),e}},created:function(){this.getProducts()}},c=n,l=a("2877"),d=Object(l["a"])(c,r,s,!1,null,null,null);e["default"]=d.exports},"4df4":function(t,e,a){"use strict";var r=a("0366"),s=a("7b0b"),i=a("9bdd"),o=a("e95a"),n=a("50c4"),c=a("8418"),l=a("35a1");t.exports=function(t){var e,a,d,u,p,v,f=s(t),m="function"==typeof this?this:Array,g=arguments.length,h=g>1?arguments[1]:void 0,b=void 0!==h,y=l(f),C=0;if(b&&(h=r(h,g>2?arguments[2]:void 0,2)),void 0==y||m==Array&&o(y))for(e=n(f.length),a=new m(e);e>C;C++)v=b?h(f[C],C):f[C],c(a,C,v);else for(u=y.call(f),p=u.next,a=new m;!(d=p.call(u)).done;C++)v=b?i(u,h,[d.value,C],!0):d.value,c(a,C,v);return a.length=C,a}},6062:function(t,e,a){"use strict";var r=a("6d61"),s=a("6566");t.exports=r("Set",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),s)},6566:function(t,e,a){"use strict";var r=a("9bf2").f,s=a("7c73"),i=a("e2cc"),o=a("0366"),n=a("19aa"),c=a("2266"),l=a("7dd0"),d=a("2626"),u=a("83ab"),p=a("f183").fastKey,v=a("69f3"),f=v.set,m=v.getterFor;t.exports={getConstructor:function(t,e,a,l){var d=t((function(t,r){n(t,d,e),f(t,{type:e,index:s(null),first:void 0,last:void 0,size:0}),u||(t.size=0),void 0!=r&&c(r,t[l],t,a)})),v=m(e),g=function(t,e,a){var r,s,i=v(t),o=h(t,e);return o?o.value=a:(i.last=o={index:s=p(e,!0),key:e,value:a,previous:r=i.last,next:void 0,removed:!1},i.first||(i.first=o),r&&(r.next=o),u?i.size++:t.size++,"F"!==s&&(i.index[s]=o)),t},h=function(t,e){var a,r=v(t),s=p(e);if("F"!==s)return r.index[s];for(a=r.first;a;a=a.next)if(a.key==e)return a};return i(d.prototype,{clear:function(){var t=this,e=v(t),a=e.index,r=e.first;while(r)r.removed=!0,r.previous&&(r.previous=r.previous.next=void 0),delete a[r.index],r=r.next;e.first=e.last=void 0,u?e.size=0:t.size=0},delete:function(t){var e=this,a=v(e),r=h(e,t);if(r){var s=r.next,i=r.previous;delete a.index[r.index],r.removed=!0,i&&(i.next=s),s&&(s.previous=i),a.first==r&&(a.first=s),a.last==r&&(a.last=i),u?a.size--:e.size--}return!!r},forEach:function(t){var e,a=v(this),r=o(t,arguments.length>1?arguments[1]:void 0,3);while(e=e?e.next:a.first){r(e.value,e.key,this);while(e&&e.removed)e=e.previous}},has:function(t){return!!h(this,t)}}),i(d.prototype,a?{get:function(t){var e=h(this,t);return e&&e.value},set:function(t,e){return g(this,0===t?0:t,e)}}:{add:function(t){return g(this,t=0===t?0:t,t)}}),u&&r(d.prototype,"size",{get:function(){return v(this).size}}),d},setStrong:function(t,e,a){var r=e+" Iterator",s=m(e),i=m(r);l(t,e,(function(t,e){f(this,{type:r,target:t,state:s(t),kind:e,last:void 0})}),(function(){var t=i(this),e=t.kind,a=t.last;while(a&&a.removed)a=a.previous;return t.target&&(t.last=a=a?a.next:t.state.first)?"keys"==e?{value:a.key,done:!1}:"values"==e?{value:a.value,done:!1}:{value:[a.key,a.value],done:!1}:(t.target=void 0,{value:void 0,done:!0})}),a?"entries":"values",!a,!0),d(e)}}},"6d61":function(t,e,a){"use strict";var r=a("23e7"),s=a("da84"),i=a("94ca"),o=a("6eeb"),n=a("f183"),c=a("2266"),l=a("19aa"),d=a("861d"),u=a("d039"),p=a("1c7e"),v=a("d44e"),f=a("7156");t.exports=function(t,e,a){var m=-1!==t.indexOf("Map"),g=-1!==t.indexOf("Weak"),h=m?"set":"add",b=s[t],y=b&&b.prototype,C=b,_={},x=function(t){var e=y[t];o(y,t,"add"==t?function(t){return e.call(this,0===t?0:t),this}:"delete"==t?function(t){return!(g&&!d(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return g&&!d(t)?void 0:e.call(this,0===t?0:t)}:"has"==t?function(t){return!(g&&!d(t))&&e.call(this,0===t?0:t)}:function(t,a){return e.call(this,0===t?0:t,a),this})};if(i(t,"function"!=typeof b||!(g||y.forEach&&!u((function(){(new b).entries().next()})))))C=a.getConstructor(e,t,m,h),n.REQUIRED=!0;else if(i(t,!0)){var P=new C,w=P[h](g?{}:-0,1)!=P,k=u((function(){P.has(1)})),D=p((function(t){new b(t)})),$=!g&&u((function(){var t=new b,e=5;while(e--)t[h](e,e);return!t.has(-0)}));D||(C=e((function(e,a){l(e,C,t);var r=f(new b,e,C);return void 0!=a&&c(a,r[h],r,m),r})),C.prototype=y,y.constructor=C),(k||$)&&(x("delete"),x("has"),m&&x("get")),($||w)&&x(h),g&&y.clear&&delete y.clear}return _[t]=C,r({global:!0,forced:C!=b},_),v(C,t),g||a.setStrong(C,t,m),C}},a630:function(t,e,a){var r=a("23e7"),s=a("4df4"),i=a("1c7e"),o=!i((function(t){Array.from(t)}));r({target:"Array",stat:!0,forced:o},{from:s})},bb2f:function(t,e,a){var r=a("d039");t.exports=!r((function(){return Object.isExtensible(Object.preventExtensions({}))}))},d81d:function(t,e,a){"use strict";var r=a("23e7"),s=a("b727").map,i=a("1dde"),o=a("ae40"),n=i("map"),c=o("map");r({target:"Array",proto:!0,forced:!n||!c},{map:function(t){return s(this,t,arguments.length>1?arguments[1]:void 0)}})},ddb0:function(t,e,a){var r=a("da84"),s=a("fdbc"),i=a("e260"),o=a("9112"),n=a("b622"),c=n("iterator"),l=n("toStringTag"),d=i.values;for(var u in s){var p=r[u],v=p&&p.prototype;if(v){if(v[c]!==d)try{o(v,c,d)}catch(m){v[c]=d}if(v[l]||o(v,l,u),s[u])for(var f in i)if(v[f]!==i[f])try{o(v,f,i[f])}catch(m){v[f]=i[f]}}}},f183:function(t,e,a){var r=a("d012"),s=a("861d"),i=a("5135"),o=a("9bf2").f,n=a("90e3"),c=a("bb2f"),l=n("meta"),d=0,u=Object.isExtensible||function(){return!0},p=function(t){o(t,l,{value:{objectID:"O"+ ++d,weakData:{}}})},v=function(t,e){if(!s(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!i(t,l)){if(!u(t))return"F";if(!e)return"E";p(t)}return t[l].objectID},f=function(t,e){if(!i(t,l)){if(!u(t))return!0;if(!e)return!1;p(t)}return t[l].weakData},m=function(t){return c&&g.REQUIRED&&u(t)&&!i(t,l)&&p(t),t},g=t.exports={REQUIRED:!1,fastKey:v,getWeakData:f,onFreeze:m};r[l]=!0}}]);
//# sourceMappingURL=chunk-000dce54.41df57aa.js.map