{"version":3,"sources":["webpack:///./src/views/backstage/Coupons.vue?a044","webpack:///src/views/backstage/Coupons.vue","webpack:///./src/views/backstage/Coupons.vue?d9dd","webpack:///./src/views/backstage/Coupons.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","on","$event","preventDefault","openModal","_v","staticStyle","attrs","reverse","sortData","_e","class","_l","item","key","id","_s","title","percent","due_date","newData","deleteModal","_m","directives","name","rawName","value","tempProduct","expression","domProps","target","composing","$set","updataCoupons","deleteCoupon","staticRenderFns","data","pagination","coupons","isNew","methods","getCoupons","Loading","vm","$store","dispatch","$http","get","api","then","response","Object","assign","backdrop","setTimeout","computed","sortProducts","sort","aIsEnabled","bIsEnabled","aPercent","bPercent","aDate","bDate","created","component"],"mappings":"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","file":"js/chunk-2d0d2bad.4957ffd4.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"coupons\"},[_c('div',{staticClass:\"text-right mb-4\"},[_c('button',{staticClass:\"button bg-biwacha\",on:{\"click\":function($event){$event.preventDefault();return _vm.openModal(true)}}},[_vm._v(\" 新增優惠碼 \")])]),_c('table',{staticClass:\"table mt-4 text-white\"},[_c('thead',[_c('tr',[_c('th',[_vm._v(\"名稱\")]),_c('th',{staticStyle:{\"cursor\":\"pointer\"},attrs:{\"width\":\"200\"},on:{\"click\":function($event){$event.preventDefault();_vm.reverse = !_vm.reverse, _vm.sortData = 'percent'}}},[_vm._v(\" 折扣百分比 \"),(_vm.sortData == '' || _vm.sortData !== 'percent')?_c('i',{staticClass:\"fas fa-sort\"}):_vm._e(),(_vm.sortData == 'percent')?_c('i',{staticClass:\"fas fa-sort-up ml-1\",class:{'reverse': _vm.reverse}}):_vm._e()]),_c('th',{staticStyle:{\"cursor\":\"pointer\"},attrs:{\"width\":\"200\"},on:{\"click\":function($event){$event.preventDefault();_vm.reverse = !_vm.reverse, _vm.sortData = 'date'}}},[_vm._v(\" 到期日 \"),(_vm.sortData == '' || _vm.sortData !== 'date')?_c('i',{staticClass:\"fas fa-sort\"}):_vm._e(),(_vm.sortData == 'date')?_c('i',{staticClass:\"fas fa-sort-up ml-1\",class:{'reverse': _vm.reverse}}):_vm._e()]),_c('th',{staticStyle:{\"cursor\":\"pointer\"},attrs:{\"width\":\"150\"},on:{\"click\":function($event){$event.preventDefault();_vm.reverse = !_vm.reverse, _vm.sortData = 'enables'}}},[_vm._v(\" 是否啟用 \"),(_vm.sortData == '' || _vm.sortData !== 'enables')?_c('i',{staticClass:\"fas fa-sort\"}):_vm._e(),(_vm.sortData == 'enables')?_c('i',{staticClass:\"fas fa-sort-up ml-1\",class:{'reverse': _vm.reverse}}):_vm._e()]),_c('th',{attrs:{\"width\":\"150\"}},[_vm._v(\"編輯\")])])]),_c('tbody',_vm._l((_vm.sortProducts),function(item){return _c('tr',{key:item.id},[_c('td',[_vm._v(_vm._s(item.title))]),_c('td',{staticClass:\"text-center\"},[_vm._v(_vm._s(item.percent)+\"%\")]),_c('td',[_vm._v(_vm._s(item.due_date))]),_c('td',[(item.is_enabled)?_c('span',{staticClass:\"text-success\",staticStyle:{\"cursor\":\"pointer\"}},[_vm._v(\" 已啟用 \"),(_vm.newData === item.id)?_c('i',{staticClass:\"fas fa-spinner fa-spin\"}):_vm._e()]):_vm._e()]),_c('td',[_c('button',{staticClass:\"button\",staticStyle:{\"background-color\":\"#1f468c\"},on:{\"click\":function($event){$event.preventDefault();return _vm.openModal(false, item)}}},[_vm._v(\" 編輯 \")]),_c('button',{staticClass:\"button\",staticStyle:{\"background-color\":\"#724938\"},on:{\"click\":function($event){$event.preventDefault();return _vm.deleteModal(item)}}},[_vm._v(\" 刪除 \")])])])}),0)]),_c('div',{staticClass:\"modal animated fadeIn\",attrs:{\"id\":\"couponsModal\",\"tabindex\":\"-1\",\"role\":\"dialog\",\"aria-labelledby\":\"exampleModalLabel\",\"aria-hidden\":\"true\"}},[_c('div',{staticClass:\"modal-dialog modal-dialog-centered\",attrs:{\"role\":\"document\"}},[_c('div',{staticClass:\"modal-content border-0 bg-dark\"},[_c('div',{staticClass:\"modal-header bg-dark text-white\"},[(_vm.isNew)?_c('h5',{staticClass:\"modal-title\"},[_vm._v(\"新增優惠碼\")]):_c('h5',{staticClass:\"modal-title\"},[_vm._v(\"編輯優惠碼\")]),_vm._m(0)]),_c('div',{staticClass:\"modal-body\"},[_c('div',{staticClass:\"form form-row\"},[_c('div',{staticClass:\"form-group col-6\"},[_c('label',{staticClass:\"label\",attrs:{\"for\":\"name\"}},[_vm._v(\" 名稱 \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.tempProduct.title),expression:\"tempProduct.title\"}],staticClass:\"input\",attrs:{\"type\":\"text\",\"id\":\"name\",\"placeholder\":\"請輸入名稱\"},domProps:{\"value\":(_vm.tempProduct.title)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.tempProduct, \"title\", $event.target.value)}}})])]),_c('div',{staticClass:\"form-group col-6\"},[_c('label',{staticClass:\"label\",attrs:{\"for\":\"code\"}},[_vm._v(\" 代碼 \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.tempProduct.code),expression:\"tempProduct.code\"}],staticClass:\"input\",attrs:{\"type\":\"text\",\"id\":\"code\",\"placeholder\":\"請輸入代碼\"},domProps:{\"value\":(_vm.tempProduct.code)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.tempProduct, \"code\", $event.target.value)}}})])]),_c('div',{staticClass:\"form-group col-6\"},[_c('label',{staticClass:\"label\",attrs:{\"for\":\"date\"}},[_vm._v(\" 到期日 \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.tempProduct.due_date),expression:\"tempProduct.due_date\"}],staticClass:\"input\",attrs:{\"type\":\"date\",\"id\":\"date\",\"placeholder\":\"請輸入到期日\"},domProps:{\"value\":(_vm.tempProduct.due_date)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.tempProduct, \"due_date\", $event.target.value)}}})])]),_c('div',{staticClass:\"form-group col-6\"},[_c('label',{staticClass:\"label\",attrs:{\"for\":\"percent\"}},[_vm._v(\" 折扣百分比 \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.tempProduct.percent),expression:\"tempProduct.percent\"}],staticClass:\"input\",attrs:{\"type\":\"text\",\"id\":\"percent\",\"placeholder\":\"請輸入折扣百分比\"},domProps:{\"value\":(_vm.tempProduct.percent)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.tempProduct, \"percent\", $event.target.value)}}})])])])]),_c('div',{staticClass:\"modal-footer\"},[_c('button',{staticClass:\"button bg-secondary\",attrs:{\"type\":\"button\",\"data-dismiss\":\"modal\"}},[_vm._v(\" 取消 \")]),_c('button',{staticClass:\"button bg-biwacha\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){$event.preventDefault();return _vm.updataCoupons($event)}}},[_vm._v(\" 確認 \")])])])])]),_c('div',{staticClass:\"modal animated bounceInDown\",attrs:{\"id\":\"delcouponsModal\",\"tabindex\":\"-1\",\"role\":\"dialog\",\"aria-labelledby\":\"removeCartLabel\",\"aria-hidden\":\"true\"}},[_c('div',{staticClass:\"modal-dialog modal-dialog-centered\",attrs:{\"role\":\"document\"}},[_c('div',{staticClass:\"modal-content bg-dark   border border-secondary\"},[_c('div',{staticClass:\"modal-body text-center p-4 h4\"},[_vm._v(\" 你確定要移除這項優惠卷嗎？ \"),_c('br'),_c('strong',{staticClass:\"text-danger\"},[_vm._v(_vm._s(_vm.tempProduct.title))]),_c('br'),_vm._v(\" (刪除後將無法恢復) \")]),_c('div',{staticClass:\"row text-center  border-top border-secondary m-0\"},[_vm._m(1),_c('div',{staticClass:\"col-6 p-0 btn btn-outline-danger border-0\"},[_c('div',{staticClass:\"p-2\",on:{\"click\":function($event){$event.preventDefault();return _vm.deleteCoupon($event)}}},[_vm._v(\" 確定 \")])])])])])])])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('button',{staticClass:\"button-close position-absolute\",attrs:{\"type\":\"button\",\"data-dismiss\":\"modal\",\"aria-label\":\"Close\"}},[_c('i',{staticClass:\"fas fa-times\"})])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"col-6 p-0 btn btn-outline-danger border-0\",attrs:{\"data-dismiss\":\"modal\"}},[_c('div',{staticClass:\"p-2 border-right border-secondary\"},[_vm._v(\" 取消 \")])])}]\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <div class=\"coupons\">\n      <div class=\"text-right mb-4\">\n        <button class=\"button bg-biwacha\" @click.prevent=\"openModal(true)\">\n          新增優惠碼\n        </button>\n      </div>\n      <table class=\"table mt-4 text-white\">\n        <thead>\n          <tr>\n            <th>名稱</th>\n            <th width=\"200\" @click.prevent=\"reverse = !reverse, sortData = 'percent'\"\n              style=\"cursor: pointer;\">\n              折扣百分比\n              <i class=\"fas fa-sort\" v-if=\"sortData == '' || sortData !== 'percent'\"></i>\n              <i v-if=\"sortData == 'percent'\" class=\"fas fa-sort-up ml-1\"\n              :class=\"{'reverse': reverse}\"></i>\n            </th>\n            <th width=\"200\" @click.prevent=\"reverse = !reverse, sortData = 'date'\"\n              style=\"cursor: pointer;\">\n              到期日\n              <i class=\"fas fa-sort\" v-if=\"sortData == '' || sortData !== 'date'\"></i>\n              <i v-if=\"sortData == 'date'\" class=\"fas fa-sort-up ml-1\"\n              :class=\"{'reverse': reverse}\"></i>\n            </th>\n            <th width=\"150\" @click.prevent=\"reverse = !reverse, sortData = 'enables'\"\n              style=\"cursor: pointer;\">\n              是否啟用\n              <i class=\"fas fa-sort\" v-if=\"sortData == '' || sortData !== 'enables'\"></i>\n              <i v-if=\"sortData == 'enables'\" class=\"fas fa-sort-up ml-1\"\n              :class=\"{'reverse': reverse}\"></i>\n            </th>\n            <th width=\"150\">編輯</th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr v-for=\"item in sortProducts\" :key=\"item.id\">\n            <td>{{ item.title }}</td>\n            <td class=\"text-center\">{{ item.percent }}%</td>\n            <td>{{ item.due_date }}</td>\n            <td>\n              <span v-if=\"item.is_enabled\" class=\"text-success\"  style=\"cursor: pointer;\">\n                已啟用\n                <i class=\"fas fa-spinner fa-spin\" v-if=\"newData === item.id\"></i>\n              </span>\n              <!-- <span v-else class=\"text-warning\"  style=\"cursor: pointer;\"\n              @click.prevent=\"updataEnabled(true, item)\">\n                未啟用\n                <i class=\"fas fa-spinner fa-spin\" v-if=\"newData === item.id\"></i>\n              </span> -->\n            </td>\n            <td>\n              <button\n                class=\"button\" style=\"background-color: #1f468c;\"\n                @click.prevent=\"openModal(false, item)\"\n              >\n                編輯\n              </button>\n              <button\n                class=\"button\" style=\"background-color: #724938;\"\n                @click.prevent=\"deleteModal(item)\"\n              >\n                刪除\n              </button>\n            </td>\n          </tr>\n        </tbody>\n      </table>\n      <!-- 新增模板 -->\n      <div\n        class=\"modal animated fadeIn\"\n        id=\"couponsModal\"\n        tabindex=\"-1\"\n        role=\"dialog\"\n        aria-labelledby=\"exampleModalLabel\"\n        aria-hidden=\"true\">\n        <div class=\"modal-dialog modal-dialog-centered\" role=\"document\">\n          <div class=\"modal-content border-0 bg-dark\">\n            <div class=\"modal-header bg-dark text-white\">\n              <h5 class=\"modal-title\" v-if=\"isNew\">新增優惠碼</h5>\n              <h5 class=\"modal-title\" v-else>編輯優惠碼</h5>\n              <button\n                type=\"button\"\n                class=\"button-close position-absolute\"\n                data-dismiss=\"modal\"\n                aria-label=\"Close\">\n                <i class=\"fas fa-times\"></i>\n              </button>\n            </div>\n            <div class=\"modal-body\">\n              <div class=\"form form-row\">\n                <div class=\"form-group col-6\">\n                  <label for=\"name\" class=\"label\">\n                    名稱\n                    <input\n                      type=\"text\"\n                      class=\"input\"\n                      id=\"name\"\n                      v-model=\"tempProduct.title\"\n                      placeholder=\"請輸入名稱\"\n                    />\n                  </label>\n                </div>\n                <div class=\"form-group col-6\">\n                  <label for=\"code\" class=\"label\">\n                    代碼\n                    <input\n                      type=\"text\"\n                      class=\"input\"\n                      id=\"code\"\n                      v-model=\"tempProduct.code\"\n                      placeholder=\"請輸入代碼\"\n                    />\n                  </label>\n                </div>\n                <div class=\"form-group col-6\">\n                  <label for=\"date\" class=\"label\">\n                    到期日\n                    <input\n                      type=\"date\"\n                      class=\"input\"\n                      id=\"date\"\n                      v-model=\"tempProduct.due_date\"\n                      placeholder=\"請輸入到期日\"\n                    />\n                  </label>\n                </div>\n                <div class=\"form-group col-6\">\n                  <label for=\"percent\" class=\"label\">\n                    折扣百分比\n                    <input\n                      type=\"text\"\n                      class=\"input\"\n                      id=\"percent\"\n                      v-model=\"tempProduct.percent\"\n                      placeholder=\"請輸入折扣百分比\"\n                    />\n                  </label>\n                </div>\n              </div>\n            </div>\n\n            <div class=\"modal-footer\">\n              <button\n                type=\"button\"\n                class=\"button bg-secondary\"\n                data-dismiss=\"modal\"\n              >\n                取消\n              </button>\n              <button\n                type=\"button\"\n                class=\"button bg-biwacha\"\n                @click.prevent=\"updataCoupons\"\n              >\n                確認\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <!--刪除的模板-->\n      <div\n        class=\"modal animated bounceInDown\"\n        id=\"delcouponsModal\"\n        tabindex=\"-1\"\n        role=\"dialog\"\n        aria-labelledby=\"removeCartLabel\"\n        aria-hidden=\"true\">\n        <div class=\"modal-dialog modal-dialog-centered\" role=\"document\">\n          <div class=\"modal-content bg-dark   border border-secondary\">\n            <div class=\"modal-body text-center p-4 h4\">\n              你確定要移除這項優惠卷嗎？\n              <br>\n              <strong class=\"text-danger\">{{ tempProduct.title }}</strong>\n              <br>\n              (刪除後將無法恢復)\n            </div>\n\n            <div class=\"row text-center  border-top border-secondary m-0\">\n              <div\n                data-dismiss=\"modal\"\n                class=\"col-6 p-0 btn btn-outline-danger border-0\"\n              >\n                <div class=\"p-2 border-right border-secondary\">\n                  取消\n                </div>\n              </div>\n\n              <div class=\"col-6 p-0 btn btn-outline-danger border-0\">\n                <div class=\"p-2\" @click.prevent=\"deleteCoupon\">\n                  確定\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport $ from 'jquery';\n\nexport default {\n  data() {\n    return {\n      pagination: {},\n      sortData: '',\n      reverse: false,\n      newData: '',\n      coupons: [],\n      tempProduct: {},\n      isNew: false,\n    };\n  },\n  methods: {\n    getCoupons(Loading) {\n      const api = `${process.env.VUE_APP_APIPATH}/api/${process.env.VUE_APP_CUSTOMPATH}/admin/coupons?page=${1}`;\n      const vm = this;\n      if (Loading) {\n        vm.$store.dispatch('loading', true);\n      }\n      this.$http.get(api).then((response) => {\n        vm.coupons = response.data.coupons;\n        vm.newData = '';\n        vm.$store.dispatch('loading', false);\n      });\n    },\n    // updataEnabled(isEnabled, item) {\n    // 為了展示後台畫面將是否啟動功能移除\n    //   const vm = this;\n    //   vm.tempProduct = Object.assign({}, item);\n    //   vm.newData = vm.tempProduct.id;\n    //   if (isEnabled) {\n    //     vm.tempProduct.is_enabled = 1;\n    //   } else if (!isEnabled) {\n    //     vm.tempProduct.is_enabled = 0;\n    //   }\n    //   this.$http.put(api, { data: vm.tempProduct }).then(() => {\n    //     vm.getCoupons(false);\n    //   });\n    // },\n    openModal(isNew, item) {\n      // 新增資料\n      if (isNew) {\n        this.tempProduct = {};\n        this.isNew = true;\n      } else {\n        this.tempProduct = Object.assign({}, item);\n        this.isNew = false;\n      }\n      $('#couponsModal').modal({\n        backdrop: 'static',\n      });\n      $('#couponsModal').modal('show');\n    },\n    updataCoupons() {\n      // 為了展示後台畫面將新增及修改功能移除，改成只顯示 Alert\n      this.$store.dispatch('loading', true);\n      setTimeout(() => {\n        this.$store.dispatch('loading', false);\n        $('#couponsModal').modal('hide');\n        this.$store.dispatch('activeAlert', '測試網站，無法執行新增或編輯');\n      }, 1000);\n      // const vm = this;\n      // this.$store.dispatch('loading', true);\n      // let httpMethod = 'post';\n      // if (!vm.isNew) {\n      //   httpMethod = 'put';\n      // }\n      // this.$http[httpMethod](api, { data: vm.tempProduct }).then((response) => {\n      //   this.$store.dispatch('loading', false);\n      //   $('#couponsModal').modal('hide');\n      //   vm.getCoupons();\n      //   if (response.data.success && httpMethod === 'post') {\n      //     this.$store.dispatch('activeAlert', '已新增優惠碼');\n      //   } else {\n      //     this.$store.dispatch('activeAlert', '已更新優惠碼');\n      //   }\n      // });\n    },\n    deleteModal(item) {\n      $('#delcouponsModal').modal('show');\n      const vm = this;\n      vm.tempProduct = Object.assign({}, item);\n    },\n    deleteCoupon() {\n      // 為了展示後台畫面將刪除功能移除，改成只顯示 Alert\n      // 刪除優惠卷\n      setTimeout(() => {\n        this.$store.dispatch('activeAlert', '測試網站，無法執行刪除');\n        $('#delcouponsModal').modal('hide');\n      }, 1000);\n      // const vm = this;\n      // this.$http.delete(api).then(() => {\n      //   vm.$store.dispatch('activeAlert', '已刪除優惠碼');\n      //   $('#delcouponsModal').modal('hide');\n      //   vm.getCoupons();\n      // });\n    },\n  },\n  computed: {\n    sortProducts() {\n      const vm = this;\n      if (vm.sortData === 'enables') {\n        vm.coupons.sort((a, b) => {\n          const aIsEnabled = a.is_enabled;\n          const bIsEnabled = b.is_enabled;\n          return (aIsEnabled > bIsEnabled ? 1 : -1) * (vm.reverse === true ? 1 : -1);\n        });\n      } else if (vm.sortData === 'percent') {\n        vm.coupons.sort((a, b) => {\n          const aPercent = Number(a.percent);\n          const bPercent = Number(b.percent);\n          return (aPercent > bPercent ? 1 : -1) * (vm.reverse === true ? 1 : -1);\n        });\n      } else if (vm.sortData === 'date') {\n        vm.coupons.sort((a, b) => {\n          const aDate = a.due_date;\n          const bDate = b.due_date;\n          return (aDate > bDate ? 1 : -1) * (vm.reverse === true ? 1 : -1);\n        });\n      }\n      return vm.coupons;\n    },\n  },\n  created() {\n    this.getCoupons(true);\n  },\n};\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Coupons.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Coupons.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Coupons.vue?vue&type=template&id=c42b32c6&\"\nimport script from \"./Coupons.vue?vue&type=script&lang=js&\"\nexport * from \"./Coupons.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}