{"version":3,"sources":["webpack:///./src/views/backstage/Orders.vue?4b83","webpack:///src/views/backstage/Orders.vue","webpack:///./src/views/backstage/Orders.vue?2739","webpack:///./src/views/backstage/Orders.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","staticStyle","attrs","on","$event","preventDefault","reverse","sortData","_v","_e","class","_l","item","key","id","is_paid","_s","_f","create_at","user","recipient","name","product","i","title","qty","unit","total","_m","staticRenderFns","data","pagination","orders","totalItem","count","methods","getitem","$http","get","api","then","response","success","forEach","vm","push","$store","dispatch","getOrders","total_pages","computed","sortOrder","sort","aIsPaid","bIsPaid","aData","bData","created","component"],"mappings":"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","file":"js/chunk-2d230a64.38b374c3.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"orders\"},[_c('table',{staticClass:\"table mt-4  text-white\"},[_c('thead',[_c('tr',[_c('th',{staticStyle:{\"cursor\":\"pointer\"},attrs:{\"width\":\"120\"},on:{\"click\":function($event){$event.preventDefault();_vm.reverse = !_vm.reverse, _vm.sortData = 'buyData'}}},[_vm._v(\" 下單日期 \"),(_vm.sortData == '' || _vm.sortData !== 'buyData')?_c('i',{staticClass:\"fas fa-sort\"}):_vm._e(),(_vm.sortData == 'buyData')?_c('i',{staticClass:\"fas fa-sort-up ml-1\",class:{'reverse': _vm.reverse}}):_vm._e()]),_c('th',{attrs:{\"width\":\"200\"}},[_vm._v(\"購買人\")]),_c('th',[_vm._v(\"購買項目\")]),_c('th',{attrs:{\"width\":\"150\"}},[_vm._v(\"訂單金額\")]),_c('th',{staticStyle:{\"cursor\":\"pointer\"},attrs:{\"width\":\"120\"},on:{\"click\":function($event){$event.preventDefault();_vm.reverse = !_vm.reverse, _vm.sortData = 'payment'}}},[_vm._v(\" 付款狀態 \"),(_vm.sortData == '' || _vm.sortData !== 'payment')?_c('i',{staticClass:\"fas fa-sort\"}):_vm._e(),(_vm.sortData == 'payment')?_c('i',{staticClass:\"fas fa-sort-up ml-1\",class:{'reverse': _vm.reverse}}):_vm._e()]),_c('th',{attrs:{\"width\":\"100\"}},[_vm._v(\"編輯\")])])]),_c('tbody',_vm._l((_vm.sortOrder),function(item){return _c('tr',{key:item.id,class:{ 'text-secondary': !item.is_paid }},[_c('td',[_vm._v(_vm._s(_vm._f(\"date\")(item.create_at)))]),_c('td',[_vm._v(_vm._s(item.user.recipient.name))]),_c('td',[_c('ul',{staticClass:\"list-unstyled\"},_vm._l((item.products),function(product,i){return _c('li',{key:i},[_vm._v(\" \"+_vm._s(product.product.title)+\" 數量：\"+_vm._s(product.qty)+\" \"+_vm._s(product.product.unit)+\" \")])}),0)]),_c('td',{staticClass:\"text-center\"},[_vm._v(_vm._s(_vm._f(\"currency\")(item.total)))]),_c('td',[(item.is_paid)?_c('span',{staticClass:\"text-success\"},[_vm._v(\"已付款\")]):_c('span',{staticClass:\"text-warning\"},[_vm._v(\"未付款\")])]),_vm._m(0,true)])}),0)])])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('td',[_c('button',{staticClass:\"button\",staticStyle:{\"background-color\":\"#1f468c\"}},[_vm._v(\"編輯\")])])}]\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <div class=\"orders\">\n      <table class=\"table mt-4  text-white\">\n        <thead>\n          <tr>\n            <th width=\"120\" @click.prevent=\"reverse = !reverse, sortData = 'buyData'\"\n              style=\"cursor: pointer;\">\n              下單日期\n              <i class=\"fas fa-sort\" v-if=\"sortData == '' || sortData !== 'buyData'\"></i>\n              <i v-if=\"sortData == 'buyData'\" class=\"fas fa-sort-up ml-1\"\n              :class=\"{'reverse': reverse}\"></i>\n            </th>\n            <th width=\"200\">購買人</th>\n            <th>購買項目</th>\n            <th width=\"150\">訂單金額</th>\n            <th width=\"120\" @click.prevent=\"reverse = !reverse, sortData = 'payment'\"\n              style=\"cursor: pointer;\">\n              付款狀態\n              <i class=\"fas fa-sort\" v-if=\"sortData == '' || sortData !== 'payment'\"></i>\n              <i v-if=\"sortData == 'payment'\" class=\"fas fa-sort-up ml-1\"\n              :class=\"{'reverse': reverse}\"></i>\n            </th>\n            <th width=\"100\">編輯</th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr\n            v-for=\"item in sortOrder\"\n            :key=\"item.id\"\n            :class=\"{ 'text-secondary': !item.is_paid }\"\n          >\n            <td>{{ item.create_at | date}}</td>\n            <td>{{ item.user.recipient.name }}</td>\n            <td>\n              <ul class=\"list-unstyled\">\n                <li v-for=\"(product, i) in item.products\" :key=\"i\">\n                  {{ product.product.title }} 數量：{{ product.qty }}\n                  {{ product.product.unit }}\n                </li>\n              </ul>\n            </td>\n            <td class=\"text-center\">{{ item.total | currency }}</td>\n            <td>\n              <span v-if=\"item.is_paid\" class=\"text-success\">已付款</span>\n              <span v-else class=\"text-warning\">未付款</span>\n            </td>\n            <td>\n              <button class=\"button\" style=\"background-color: #1f468c;\">編輯</button>\n            </td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n\n  </div>\n</template>\n\n<script>\n\nexport default {\n  data() {\n    return {\n      pagination: {},\n      orders: [],\n      totalItem: 0,\n      count: 0,\n      sortData: '',\n      reverse: false,\n    };\n  },\n  methods: {\n    getitem(page) {\n      const vm = this;\n      const api = `${process.env.VUE_APP_APIPATH}/api/${process.env.VUE_APP_CUSTOMPATH}/admin/orders?page=${page}}`;\n      this.$http.get(api).then((response) => {\n        if (response.data.success) {\n          response.data.orders.forEach((item) => {\n            vm.orders.push(item);\n          });\n        }\n      });\n      vm.count += 1;\n      if (vm.count === vm.totalItem) {\n        vm.$store.dispatch('loading', false);\n      }\n    },\n    getOrders() {\n      const vm = this;\n      vm.$store.dispatch('loading', true);\n      const api = `${process.env.VUE_APP_APIPATH}/api/${process.env.VUE_APP_CUSTOMPATH}/admin/orders?page=${1}`;\n      this.$http.get(api).then((response) => {\n        if (response.data.success) {\n          vm.totalItem = response.data.pagination.total_pages;\n          for (let i = 0; i < vm.totalItem; i += 1) {\n            vm.getitem(i + 1);\n          }\n        }\n      });\n    },\n  },\n  computed: {\n    sortOrder() {\n      const vm = this;\n      if (vm.sortData === 'payment') {\n        vm.orders.sort((a, b) => {\n          const aIsPaid = a.is_paid;\n          const bIsPaid = b.is_paid;\n          return (aIsPaid > bIsPaid ? 1 : -1) * (vm.reverse === true ? 1 : -1);\n        });\n      } else if (vm.sortData === 'buyData' && !vm.$store.state.isLoading) {\n        vm.orders.sort((a, b) => {\n          const aData = a.create_at;\n          const bData = b.create_at;\n          return (aData > bData ? 1 : -1) * (vm.reverse === true ? 1 : -1);\n        });\n      }\n      return vm.orders;\n    },\n  },\n  created() {\n    this.getOrders();\n  },\n};\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Orders.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Orders.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Orders.vue?vue&type=template&id=e46a4c72&\"\nimport script from \"./Orders.vue?vue&type=script&lang=js&\"\nexport * from \"./Orders.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}