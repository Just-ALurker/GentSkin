(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0d2bad"],{"5a6a":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"coupons"},[a("div",{staticClass:"text-right mb-4"},[a("button",{staticClass:"button bg-biwacha",on:{click:function(e){return e.preventDefault(),t.openModal(!0)}}},[t._v(" 新增優惠碼 ")])]),a("table",{staticClass:"table mt-4 text-white"},[a("thead",[a("tr",[a("th",[t._v("名稱")]),a("th",{staticStyle:{cursor:"pointer"},attrs:{width:"200"},on:{click:function(e){e.preventDefault(),t.reverse=!t.reverse,t.sortData="percent"}}},[t._v(" 折扣百分比 "),""==t.sortData||"percent"!==t.sortData?a("i",{staticClass:"fas fa-sort"}):t._e(),"percent"==t.sortData?a("i",{staticClass:"fas fa-sort-up ml-1",class:{reverse:t.reverse}}):t._e()]),a("th",{staticStyle:{cursor:"pointer"},attrs:{width:"200"},on:{click:function(e){e.preventDefault(),t.reverse=!t.reverse,t.sortData="date"}}},[t._v(" 到期日 "),""==t.sortData||"date"!==t.sortData?a("i",{staticClass:"fas fa-sort"}):t._e(),"date"==t.sortData?a("i",{staticClass:"fas fa-sort-up ml-1",class:{reverse:t.reverse}}):t._e()]),a("th",{staticStyle:{cursor:"pointer"},attrs:{width:"150"},on:{click:function(e){e.preventDefault(),t.reverse=!t.reverse,t.sortData="enables"}}},[t._v(" 是否啟用 "),""==t.sortData||"enables"!==t.sortData?a("i",{staticClass:"fas fa-sort"}):t._e(),"enables"==t.sortData?a("i",{staticClass:"fas fa-sort-up ml-1",class:{reverse:t.reverse}}):t._e()]),a("th",{attrs:{width:"150"}},[t._v("編輯")])])]),a("tbody",t._l(t.sortProducts,(function(e){return a("tr",{key:e.id},[a("td",[t._v(t._s(e.title))]),a("td",{staticClass:"text-center"},[t._v(t._s(e.percent)+"%")]),a("td",[t._v(t._s(e.due_date))]),a("td",[e.is_enabled?a("span",{staticClass:"text-success",staticStyle:{cursor:"pointer"}},[t._v(" 已啟用 "),t.newData===e.id?a("i",{staticClass:"fas fa-spinner fa-spin"}):t._e()]):t._e()]),a("td",[a("button",{staticClass:"button",staticStyle:{"background-color":"#1f468c"},on:{click:function(a){return a.preventDefault(),t.openModal(!1,e)}}},[t._v(" 編輯 ")]),a("button",{staticClass:"button",staticStyle:{"background-color":"#724938"},on:{click:function(a){return a.preventDefault(),t.deleteModal(e)}}},[t._v(" 刪除 ")])])])})),0)]),a("div",{staticClass:"modal animated fadeIn",attrs:{id:"couponsModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog modal-dialog-centered",attrs:{role:"document"}},[a("div",{staticClass:"modal-content border-0 bg-dark"},[a("div",{staticClass:"modal-header bg-dark text-white"},[t.isNew?a("h5",{staticClass:"modal-title"},[t._v("新增優惠碼")]):a("h5",{staticClass:"modal-title"},[t._v("編輯優惠碼")]),t._m(0)]),a("div",{staticClass:"modal-body"},[a("div",{staticClass:"form form-row"},[a("div",{staticClass:"form-group col-6"},[a("label",{staticClass:"label",attrs:{for:"name"}},[t._v(" 名稱 "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.title,expression:"tempProduct.title"}],staticClass:"input",attrs:{type:"text",id:"name",placeholder:"請輸入名稱"},domProps:{value:t.tempProduct.title},on:{input:function(e){e.target.composing||t.$set(t.tempProduct,"title",e.target.value)}}})])]),a("div",{staticClass:"form-group col-6"},[a("label",{staticClass:"label",attrs:{for:"code"}},[t._v(" 代碼 "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.code,expression:"tempProduct.code"}],staticClass:"input",attrs:{type:"text",id:"code",placeholder:"請輸入代碼"},domProps:{value:t.tempProduct.code},on:{input:function(e){e.target.composing||t.$set(t.tempProduct,"code",e.target.value)}}})])]),a("div",{staticClass:"form-group col-6"},[a("label",{staticClass:"label",attrs:{for:"date"}},[t._v(" 到期日 "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.due_date,expression:"tempProduct.due_date"}],staticClass:"input",attrs:{type:"date",id:"date",placeholder:"請輸入到期日"},domProps:{value:t.tempProduct.due_date},on:{input:function(e){e.target.composing||t.$set(t.tempProduct,"due_date",e.target.value)}}})])]),a("div",{staticClass:"form-group col-6"},[a("label",{staticClass:"label",attrs:{for:"percent"}},[t._v(" 折扣百分比 "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.percent,expression:"tempProduct.percent"}],staticClass:"input",attrs:{type:"text",id:"percent",placeholder:"請輸入折扣百分比"},domProps:{value:t.tempProduct.percent},on:{input:function(e){e.target.composing||t.$set(t.tempProduct,"percent",e.target.value)}}})])])])]),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"button bg-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v(" 取消 ")]),a("button",{staticClass:"button bg-biwacha",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.updataCoupons(e)}}},[t._v(" 確認 ")])])])])]),a("div",{staticClass:"modal animated bounceInDown",attrs:{id:"delcouponsModal",tabindex:"-1",role:"dialog","aria-labelledby":"removeCartLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog modal-dialog-centered",attrs:{role:"document"}},[a("div",{staticClass:"modal-content bg-dark   border border-secondary"},[a("div",{staticClass:"modal-body text-center p-4 h4"},[t._v(" 你確定要移除這項優惠卷嗎？ "),a("br"),a("strong",{staticClass:"text-danger"},[t._v(t._s(t.tempProduct.title))]),a("br"),t._v(" (刪除後將無法恢復) ")]),a("div",{staticClass:"row text-center  border-top border-secondary m-0"},[t._m(1),a("div",{staticClass:"col-6 p-0 btn btn-outline-danger border-0"},[a("div",{staticClass:"p-2",on:{click:function(e){return e.preventDefault(),t.deleteCoupon(e)}}},[t._v(" 確定 ")])])])])])])])])},o=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"button-close position-absolute",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("i",{staticClass:"fas fa-times"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-6 p-0 btn btn-outline-danger border-0",attrs:{"data-dismiss":"modal"}},[a("div",{staticClass:"p-2 border-right border-secondary"},[t._v(" 取消 ")])])}],r=(a("99af"),a("a9e3"),a("1157")),i=a.n(r),n={data:function(){return{pagination:{},sortData:"",reverse:!1,newData:"",coupons:[],tempProduct:{},isNew:!1}},methods:{getCoupons:function(t){var e="".concat("https://vue-course-api.hexschool.io","/api/").concat("gentskin","/admin/coupons?page=",1),a=this;t&&a.$store.dispatch("loading",!0),this.$http.get(e).then((function(t){a.coupons=t.data.coupons,a.newData="",a.$store.dispatch("loading",!1)}))},openModal:function(t,e){t?(this.tempProduct={},this.isNew=!0):(this.tempProduct=Object.assign({},e),this.isNew=!1),i()("#couponsModal").modal({backdrop:"static"}),i()("#couponsModal").modal("show")},updataCoupons:function(){var t=this;this.$store.dispatch("loading",!0),setTimeout((function(){t.$store.dispatch("loading",!1),i()("#couponsModal").modal("hide"),t.$store.dispatch("activeAlert","測試網站，無法執行新增或編輯")}),1e3)},deleteModal:function(t){i()("#delcouponsModal").modal("show");var e=this;e.tempProduct=Object.assign({},t)},deleteCoupon:function(){var t=this;setTimeout((function(){t.$store.dispatch("activeAlert","測試網站，無法執行刪除"),i()("#delcouponsModal").modal("hide")}),1e3)}},computed:{sortProducts:function(){var t=this;return"enables"===t.sortData?t.coupons.sort((function(e,a){var s=e.is_enabled,o=a.is_enabled;return(s>o?1:-1)*(!0===t.reverse?1:-1)})):"percent"===t.sortData?t.coupons.sort((function(e,a){var s=Number(e.percent),o=Number(a.percent);return(s>o?1:-1)*(!0===t.reverse?1:-1)})):"date"===t.sortData&&t.coupons.sort((function(e,a){var s=e.due_date,o=a.due_date;return(s>o?1:-1)*(!0===t.reverse?1:-1)})),t.coupons}},created:function(){this.getCoupons(!0)}},c=n,l=a("2877"),d=Object(l["a"])(c,s,o,!1,null,null,null);e["default"]=d.exports}}]);
//# sourceMappingURL=chunk-2d0d2bad.4957ffd4.js.map